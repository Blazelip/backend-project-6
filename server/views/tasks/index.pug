extends ../layouts/application.pug

block header
  h1.display-4.fw-bold= t('views.tasks.title')
  
block content
  - isTasksEmpty = (tasks) => _.isEmpty(tasks)
  a.btn.btn-primary(href=`/tasks/new`)= t('views.tasks.createBtn')
  .table-responsive
    table.table.table-borderless.table-striped.mt-5.bg-white
      thead
        tr
          th= t('views.tasks.table.id')
          th= t('views.tasks.table.name')
          th= t('views.tasks.table.status')
          th= t('views.tasks.table.author')
          th= t('views.tasks.table.executor')
          th= t('views.tasks.table.createdAt')
          if !isTasksEmpty(tasks)
            th= t('views.tasks.table.actions')
      tbody
        each task in tasks
          tr 
            td= task.id
            td
              a(href=`/tasks/${task.id}`)= task.name
            td= task.status.title
            td= `${task.creator.firstName} ${task.creator.lastName}`
            td= `${task.executor.firstName} ${task.executor.lastName}`
            td= formatDate(task.createdAt)
            if !isTasksEmpty(tasks)
              td
                .d-flex.flex-wrap
                  a.btn.btn-primary.me-1(href=`/tasks/${task.id}/edit`)= t('views.tasks.table.action.change')
                  +buttonTo(`/tasks/${task.id}`, 'delete')(class="btn btn-danger" value=t('views.tasks.table.action.delete'))
